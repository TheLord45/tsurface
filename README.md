# TSurface
This is a program to design a surface for a touch panel. Where _touch panel_ means usualy a phone (Android or iOS). There exists the company [AMX](https://www.amx.com) who offers, beside other things, some commercial touch panels. This panels require also a controller. They have a proprietary protocol and there exists the program [TPDesigner](https://www.amx.com/en/products/tpdesign5) to design a surface for the touch panels of them.

Some years ago I started to develop the application [TPanel](https://github.com/TheLord45/tpanel) which is a free implementation of this kind of touch panels. It is available for all operating systems (except gaming consoles like Windows). Unfortunately the application **TPDesign** is only available for Windows. This is unsatisfactory and therefore I desided to implement this application myself. I call it **TSurface** and it will have mostly if not all features the original have. Beside that, it will have some additional features like presenting GPS coordinates (if the device supports it).

TSurface will be able to read TP4 and TP5 files, generated by the original **TPDesiner**. It converts this files in its own file format. Instead of using XML for the page configuration **TSurface** uses JSON. The internal handling of JSON is a lot easier than handling XML. **TSurface** uses the format of [tar](https://www.geeksforgeeks.org/techtips/tar-compressed-format/) to safe all files into one. It also compresses the resulting file to safe space. This allows anybody to simply unzip the file with the following command:

    tar -xf <file>
**Tsurface will be able to encrypt the contents of the file. It is planned to encrypt the JSON files only. The user can select this and define a password. The files will be encrypted with an AES algorithm. This means, that the file is lost once the password is lost ğŸ¤·.

# Implementation matrix
Currently the program is under heavy development and in an early state. At the moment it is not uasable because too much is missing. The following matrix shows what is already implemented and what is still missing.

|Part|Fully functional|Partly implemented|Missing|Priority|
|----| :----: | :----: | :----: |--------|
|**Menu: File**|
|Create a new file|âœ…|||High|
|Open an existing file||âœ”ï¸||High|
|Close an open file|||âŒ|Medium|
|Save a loaded file|âœ…|||High|
|Save a file with another name|âœ…|||High|
|Save as different panel type|||âŒ|Low|
|Print|||âŒ|Low|
|Print preview|||âŒ|Low|
|Print Setup|||âŒ|Low|
|**Menu: Edit**|
|Selection Tool||âœ”ï¸||High|
|Button Draw Tool||âœ”ï¸||High|
|Show Grid|âœ…|||High|
|Snap to Grid||âœ”ï¸||High|
|Quick Input|||âŒ|Low|
|Undo|||âŒ|Medium|
|Redo|||âŒ|Medium|
|Cut|||âŒ|Medium|
|Copy|||âŒ|Medium|
|Paste|||âŒ|Medium|
|Replace|||âŒ|Medium|
|Delete|||âŒ|Medium|
|Rename|||âŒ|Medium|
|Find|||âŒ|Low|
|Find and Replace|||âŒ|Low|
|Select All||âœ”ï¸||Medium|
|Apply to All|||âŒ|Medium|
|Edit Previous|||âŒ|Low|
|Edit Next|||âŒ|Low|
|Preferences||âœ”ï¸||High|
|**Menu: Panel**|
|Add Page||âœ”ï¸||High|
|Add Popup Page||âœ”ï¸||High|
|Add Application Window|||âŒ|High|
|Edit Sub-Page Sets|||âŒ|Medium|
|Edit Drop-Target Groups|||âŒ|Low|
|Resource Manager||âœ”ï¸||High|
|Refresh Dynamic Images|||âŒ|Low|
|Edit Palettes|||âŒ|High|
|Export Page Images|||âŒ|Low|
|Verify Function Maps|||âŒ|Low|
|Verify Event Actions|||âŒ|Low|
|Synchronize Fonts|||âŒ|Low|
|Generate Programmer's Report|||âŒ|Low|
|View Conversion Log|||âŒ|Low|
|Delete Conversion Log|||âŒ|Low|
|**Menu: Page**|
|Show Popup Page||âœ”ï¸||High|
|Hide Popup Page||âœ”ï¸||High|
|Hide all Popup Pages and Application Windows|||âŒ|High|
|Show Application Window|||âŒ|High|
|Hide Application Window|||âŒ|High|
|Show External Controlls|||âŒ|High|
|Copy Image to Clipboard|||âŒ|Low|
|**Menu: Button**
|Reset Display|||âŒ|Low|
|Display Previous State|||âŒ|Medium|
|Display Next State|||âŒ|Medium|
|Choose Display State|||âŒ|Medium|
|Add States|||âŒ|High|
|Insert States|||âŒ|High|
|Animation Wizard|||âŒ|Low|
|Power Assign|||âŒ|Low|
|Paste Controlls|||âŒ|Low|
|Preview|||âŒ|Low|
|**Menu: States**|
|Reverse States|||âŒ|Medium|
|Set As Display State|||âŒ|Low|
|Tweeners|||âŒ|Medium|
|**Menu: Layout**|
|Bring to Front|||âŒ|High|
|Send To Back|||âŒ|High|
|Shift Button Up|||âŒ|High|
|Shift Button Down|||âŒ|High|
|Align|||âŒ|High|
|Center in Page|||âŒ|High|
|Make Same Size|||âŒ|High|
|Size To Image|||âŒ|High|
|Size for Video|||âŒ|Medium|
|Horizontal Spacing|||âŒ|High|
|Vertical Spacing|||âŒ|High|
|Alignment and Sizing|||âŒ|High|
|**Menu: Transfer**
|Connect|||âŒ|High|
|Disconnect From Master|||âŒ|Low|
|Send To Panel|||âŒ|High|
|Send File To Panel|||âŒ|High|
|Receive From Panel|||âŒ|Low|
|Redo Last Transfer|||âŒ|Medium|
|Cancel Transfer|||âŒ|Medium|
|Cancel All Pending Transfers|||âŒ|Medium|
|Clear Transfer|||âŒ|Low|
|Clear All Completed Transfers|||âŒ|Low|
|Close Status When Empty|||âŒ|Low|
|**Menu: View**|
|Toolbars||âœ”ï¸||High|
|Workspace||âœ”ï¸||High|
|Properties||âœ”ï¸||High|
|State Manager|||âŒ|High|
|Button Preview|||âŒ|Medium|
|Magnifier|||âŒ|Low|
|Transfer Status|||âŒ|Low|
|Status Bar|||âŒ|Medium|
|Dock All Floating Windows|||âŒ|Low|
|Property Painter|||âŒ|Low|
|Display Function And State Overlay|||âŒ|Medium|
|Errors and Warnings Report|||âŒ|Low|
|MDI Page Tabs|||âŒ|Low|
|Customize|||âŒ|Low|
|**Menu: Tools**|
|View Readme|||âŒ|Low|
|Paint|||âŒ|Low|
|G4 Utility|||âŒ|Very Low|
|**Menu: Window**|
|Zoom|||âŒ|Low|
|Stack|||âŒ|Low|
|Cascade|||âŒ|Low|
|**Menu: Help**|||âŒ|Low|

# Technical details
The program is developped in C++ under Linux and a Mac. It uses the Qt6 framework. If you like to help me develop it, you need a Linux machine or a Mac. You need to install the following packages:

## Linux
* Qt6 ([Get and install Qt](https://doc.qt.io/qt-6/get-and-install-qt.html))
* Fontconfig (part of distribution)
* Openssl (part of distribution)
* Freetype (part of distribution)
* Archive (part of distribution)

## Mac OSX
* Qt6 ([Get and install Qt](https://doc.qt.io/qt-6/get-and-install-qt.html))
* [Homebrew](https://brew.sh/)

The following packages should be installed in Homebrew:
* Fontconfig
* Openssl
* Freetype
* Archive

# Compile
I'm using the IDE from Qt called [QtCreator](https://www.qt.io/development/tools/qt-creator-ide). This makes it very easy to write the code and using the Qt framework. But you can also use the Qt version coming with your Linux distribution if it is not too old. I suggest to install the [Qt framework](https://doc.qt.io/qt-6/get-and-install-qt.html).

## Linux
On Linux compile and install the application by typing the following commands:
```
cmake -B build -S . -G Ninja -DCMAKE_PREFIX_PATH="/<path>/<to>/Qt/6.x.x/gcc_64/lib/cmake"
cmake --build build
sudo cmake --install build
```
> Replace `/<path>/<to>/` with the path to your Qt installation (usualy `/opt/Qt`).

## Mac OSX
```
cmake -B build -S . -G Ninja -DCMAKE_PREFIX_PATH="/<path>/<to>/Qt/6.x.x/macos/lib/cmake:/<path>/<to>/homebrew/lib/cmake"
cmake --build build
sudo cmake --install build
```
> Replace `/<path>/<to>/` with the path to your Qt installation and to homebrew (usualy `$HOME/Qt`, `/opt/homebrew`).

You'll find the application in `build/tsurface.app/Contents/MacOS/tsurface`. Start it from the command line like:

    build/tsurface.app/Contents/MacOS/tsurface

